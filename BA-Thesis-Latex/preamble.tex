%!TEX root = thesis.tex
% Author: Jannes Bantje
% Modified: Lars Haalck lars.haalck@wwu.de
% please ask Lars Haalck first if you have any questions

\documentclass[%
a4paper,
%a5paper,
parskip=half,
index=totoc,
toc=listof,
fontsize = 10, %a5
%fontsize=11, %a4
headinclude,
twoside,
%BCOR = 10mm, %a5
BCOR=12mm, %a4 standard: 12
cleardoublepage=empty,
DIV=13, %  a5
%DIV=13, %a4
numbers = noenddot,
%draft=true
final
]{scrreprt}

% %Abänderung Lange/Kurze Version False = wenige Listings; True = alle Listings
\newif\ifimportant
\importanttrue

\usepackage[usenames,x11names]{xcolor}
\usepackage[final]{graphicx}
\usepackage{subcaption}
\usepackage[ngerman]{datetime}

% typographic settings, fonts, and math
\usepackage[utf8]{inputenc}
\usepackage[semibold]{libertine}
\usepackage[T1]{fontenc}
\usepackage{textcomp} % verhindert ein paar Fehler bei den Fonts
\usepackage[varl]{zi4}
\usepackage{mathtools,amssymb,amsthm} % Verbesserung von amsmath (die amsmath selbst lädt)
\usepackage[libertine,cmintegrals,bigdelims,varbb]{newtxmath}
\usepackage[ngerman]{babel}
\usepackage[babel=true, tracking=true,final]{microtype}

%eigene Packages hinzgefügt für Listings und Courier New als Schriftart für Variablen
\usepackage{courier}
\usepackage{listings}
\lstset{
        basicstyle=\ttfamily\normalsize,
        language = Python,
        breaklines = true,
        numbers=left,
        stepnumber=1,
        numbersep=5pt,
        frame = lines,
        %commentstyle = \color{white},
        %morecomment  = [l][\@gobble]{\#}, 
        %morecomment  = [is]{\"""}{\"""},
        breakatwhitespace = false,
}
\lstdefinestyle{intext}{
        basicstyle=\ttfamily\scriptsize,
        language = Python,
        breaklines = true,
        numbers=left,
        stepnumber=1,
        numbersep=5pt,
        frame = lines,
        %commentstyle = \color{white},
        morecomment  = [l][\@gobble]{\#}, 
        morecomment  = [is]{\"""}{\"""},
        breakatwhitespace = false,
}

%Package für Tabellen
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}
%weitere Abänderungen von mir für Verhinderung von Schusterjunge
\widowpenalty=10000
\clubpenalty=10000
\displaywidowpenalty = 10000

%Abänderungen Parametersatz
% \renewcommand{\topfraction}{0.9}
% \renewcommand{\bottomfraction}{0.8}

% \setcounter{topnumber}{2}
% \setcounter{bottomnumber}{2}
% \setcounter{totalnumber}{4}
% \setcounter{dbltopnumber}{2}
% \renewcommand{\dbltopfraction}{0.9}
% \renewcommand{\textfraction}{0.7}

% \renewcommand{\floatpagefraction}{0.7}
% \renewcommand{\dblfloatpagefraction}{0.7}

% %Abänderung Lange/Kurze Version False = wenige Listings; True = alle Listings




% set line spacing
\usepackage{setspace}
% for example 1.5 line spacing
\onehalfspacing

% literature settings
\usepackage[%
backend=biber,
sortlocale=auto,
natbib,
hyperref,
backref,
mincitenames=1,
maxcitenames=1,
style=ieee
]%
{biblatex}
\addbibresource{literature.bib} % sets literature file

% hyperref settings to make links clickable in PDF
\usepackage[%
hidelinks,
pdfpagelabels,
bookmarksopen=true,
bookmarksnumbered=true,
linkcolor=black,
urlcolor=SkyBlue2,
plainpages=false,
pagebackref,
citecolor=black,
hypertexnames=true,
pdfborderstyle={/S/U},
linkbordercolor=SkyBlue2,
colorlinks=false,
backref=false,
pdfencoding=auto,
psdextra
]{hyperref}
\hypersetup{final}

% enumeration settings
\usepackage[shortlabels]{enumitem}
\setlist[enumerate,description]{font=\sffamily\bfseries} % makes labels in enumeration bold
\usepackage[german=quotes]{csquotes}

\usepackage{ifdraft}
\setlength{\marginparwidth}{2.0cm}
\ifoptionfinal{}{
    % enable this line to better visualize overflows
    % \PassOptionsToPackage{showframe}{geometry}

    \paperwidth=\dimexpr \paperwidth + 3cm\relax
    \oddsidemargin=\dimexpr\oddsidemargin + 0cm\relax
    \evensidemargin=\dimexpr\evensidemargin + 3cm\relax
    \setlength{\marginparwidth}{2.5cm}
}

\usepackage[pass]{geometry}
% allows adding of todo notes at the side of the document
\usepackage[obeyFinal,textsize=small,textwidth=2.5cm]{todonotes}

% settings for the header and footer
\usepackage[headsepline=1pt]{scrlayer-scrpage}
\pagestyle{scrheadings}
\clearpairofpagestyles % clear defaults
\setkomafont{headsepline}{\color{gray}} % adds a gray line under the header
% set section title on the right, and chapter title on the left page in a double page
% document
\automark[section]{chapter}

\rohead{\rightmark} % section title on the right side
\lehead{\scshape\leftmark} % chapter title on the left side an in small caps
\ofoot[\pagemark]{\pagemark} % page marks always on the outer site of the page

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}


% sets page marks and footer and header texts to sans-serif in gray
\renewcommand*{\pnumfont}{\sffamily}
\renewcommand*{\footfont}{\sffamily\color{gray}}
\renewcommand*{\headfont}{\sffamily\color{gray}}

% change the chapter, section and subsection font sizes and spacings a bit for a5 format
\setlength{\footskip}{1.75\baselineskip} % change the spacing a bit for a5 format
\RedeclareSectionCommand[%
afterskip=1\baselineskip,%
beforeskip=-1\baselineskip]{chapter}

\setkomafont{chapter}{\LARGE}
\setkomafont{section}{\Large}
\setkomafont{subsection}{\large}

% adds a thick gray line after the chapter number
\renewcommand*{\chapterformat}{%
    \thechapter\enskip
    \textcolor{gray!50}{\rule[-\dp\strutbox]{1.5pt}{\baselineskip}}\enskip
}

% math environments
\usepackage{amsthm}
\usepackage{thmtools}
\usepackage{mdframed}
\usepackage{blindtext}
\renewcommand{\listtheoremname}{Übersicht aller Aussagen}

% -- Theoreme als PDF-Lesezeichen
\usepackage{bookmark}
\bookmarksetup{open,numbered}
\makeatletter
\newcommand*{\theorembookmark}{%
   \bookmark[
     dest=\@currentHref,
     rellevel=1,
     keeplevel,
   ]{%
     \thmt@thmname\space\csname the\thmt@envname\endcsname
     \ifx\thmt@shortoptarg\@empty
     \else
       \space(\thmt@shortoptarg)%
     \fi
   }%
}
\makeatother

% -- Definition der einzelnen Umgebungen
\declaretheoremstyle[%
     headfont=\sffamily\bfseries,
     notefont=\normalfont\sffamily,
     bodyfont=\normalfont,
     headformat=\NAME\ \NUMBER\NOTE,
     headpunct=,
     postheadspace=\newline,
     spaceabove=\parsep,spacebelow=\parsep,
     %shaded={bgcolor=gray!20},
     postheadhook=\theorembookmark,
     mdframed={
         backgroundcolor=gray!20,
             linecolor=gray!20,
             innertopmargin=6pt,
             roundcorner=5pt,
             innerbottommargin=6pt,
             skipbelow=\parsep,
             skipbelow=\parsep }
     ]%
{mainstyle}

\declaretheoremstyle[%
     headfont=\sffamily\bfseries,
     notefont=\normalfont\sffamily,
     bodyfont=\normalfont,
     headformat=\NAME\ \NUMBER\NOTE,
     headpunct=,
     postheadspace=\newline,
     spaceabove=15pt,spacebelow=10pt,
     postheadhook=\theorembookmark]%
{mainstyle_unshaded}

\declaretheoremstyle[%
     headfont=\sffamily\bfseries,
     notefont=\normalfont\sffamily,
     bodyfont=\normalfont,
     headformat=\NUMBER\NAME\NOTE,
     headpunct=,
     postheadspace=\newline,
     spaceabove=15pt,spacebelow=10pt,
     % shaded={bgcolor=gray!20},
     postheadhook=\theorembookmark]%
{mainstyle_unnumbered}

\declaretheorem[name=Definition,parent=section,style=mainstyle]{definition}
\declaretheorem[name=Definition,numbered=no,style=mainstyle]{definition*}
\declaretheorem[name=Definition,sharenumber=definition,style=mainstyle_unshaded]{definitionUnshaded}

\declaretheorem[name=Theorem,sharenumber=definition,style=mainstyle]{theorem}
\declaretheorem[name=Theorem,numbered=no,style=mainstyle_unnumbered]{theorem*}

\declaretheorem[name=Proposition,sharenumber=definition,style=mainstyle]{proposition}
\declaretheorem[name=Lemma,sharenumber=definition,style=mainstyle]{lemma}

\declaretheorem[name=Satz,sharenumber=definition,style=mainstyle]{satz}
\declaretheorem[name=Satz,sharenumber=definition,style=mainstyle_unshaded]{satzUnshaded}
\declaretheorem[name=Satz,numbered=no,style=mainstyle_unnumbered]{satz*}

\declaretheorem[name=Korollar,sharenumber=definition,style=mainstyle]{korollar}

\declaretheorem[name=Notation,numbered=no,style=mainstyle_unnumbered]{notation}
\declaretheorem[name=Bemerkung,numbered=no,style=mainstyle_unnumbered]{bemerkung}
\declaretheorem[name=Beispiel,numbered=no,style=mainstyle_unnumbered]{beispiel}
\declaretheorem[name=Beispiele,numbered=no,style=mainstyle_unnumbered]{beispiele} 
